(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04a32104"],{"069a":function(t,e,o){},6856:function(t,e,o){"use strict";o("069a")},"74de":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"commodity"}},[o("div",{staticClass:"top"},[o("div",{staticClass:"title"},[t._v("商品管理")]),t.tableShow?o("div",{staticClass:"btn",on:{click:function(e){t.tableShow=!1}}},[t._v("添加商品")]):t._e()]),o("div",{staticClass:"line"}),t.tableShow?o("el-table",{staticClass:"table",attrs:{data:t.tableData}},[o("el-table-column",{attrs:{prop:"productName",label:"商品名称",align:"center"}}),o("el-table-column",{attrs:{prop:"describe",label:"商品描述",align:"center"}}),o("el-table-column",{attrs:{prop:"productPrice",label:"商品价格",align:"center"}}),o("el-table-column",{attrs:{label:"商品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[o("img",{staticStyle:{width:"200px",height:"150px"},attrs:{src:t.row.imageUrl,alt:""}})]}}],null,!1,776240359)}),o("el-table-column",{attrs:{prop:"status",label:"商品状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticStyle:{color:"#2DBD66"}},[t._v(t._s("1"===e.row.status?"上架":"下架"))])]}}],null,!1,1856673527)}),o("el-table-column",{attrs:{prop:"operation",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){return t.judgeStatus(e.row)}}},[t._v(t._s("1"===e.row.status?"下架":"上架"))]),o("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(o){return t.judgeDelete(e.row)}}},[t._v("删除")])]}}],null,!1,1170439084)})],1):o("el-form",{ref:"form",staticClass:"goodForm",attrs:{model:t.goodForm,"label-width":"85px"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{staticClass:"input",attrs:{placeholder:"请输入商品名称"},model:{value:t.goodForm.productName,callback:function(e){t.$set(t.goodForm,"productName",e)},expression:"goodForm.productName"}})],1),o("el-form-item",{attrs:{label:"商品描述"}},[o("el-input",{staticClass:"input",attrs:{placeholder:"请输入商品描述"},model:{value:t.goodForm.describe,callback:function(e){t.$set(t.goodForm,"describe",e)},expression:"goodForm.describe"}})],1),o("el-form-item",{attrs:{label:"商品价格"}},[o("el-input",{staticClass:"input",attrs:{placeholder:"请输入商品价格"},model:{value:t.goodForm.productPrice,callback:function(e){t.$set(t.goodForm,"productPrice",e)},expression:"goodForm.productPrice"}})],1),o("el-form-item",{staticStyle:{"margin-top":"40px"},attrs:{label:"商品图片"}},[o("div",{staticClass:"upload"},[o("el-upload",{ref:"file",staticClass:"upload-demo",attrs:{action:"aaa",name:"file","show-file-list":!1,"before-upload":t.beforeUpload}},[t.url?o("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.url}}):o("i",{staticClass:"el-icon-plus",staticStyle:{width:"100px",height:"100px",margin:"80px 0 0 50px"}})])],1)]),o("el-form-item",{attrs:{label:"商品状态"}},[o("el-switch",{staticClass:"switch",attrs:{"active-color":"#15BEAC","active-text":"上架","inactive-text":"下架","active-value":"1","inactive-value":"0"},model:{value:t.goodForm.status,callback:function(e){t.$set(t.goodForm,"status",e)},expression:"goodForm.status"}})],1),o("el-form-item",[o("div",{staticClass:"btnBox"},[o("div",{staticClass:"btn",on:{click:function(e){t.tableShow=!0}}},[t._v("取消")]),o("div",{staticClass:"btn",on:{click:function(e){return t.addGood()}}},[t._v("确认")])])])],1),o("el-dialog",{staticClass:"dialog",attrs:{title:"上架确认",visible:t.dialogVisible1,width:"25%","lock-scroll":!1,top:"30vh",center:""},on:{"update:visible":function(e){t.dialogVisible1=e}}},[o("div",{staticClass:"tips"},[t._v(" 上架后用户将可以正常购买本商品，是否确认上架本商品？ ")]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"btn",on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取消")]),o("div",{staticClass:"btn",on:{click:function(e){return t.changeStatus()}}},[t._v("确认")])])]),o("el-dialog",{staticClass:"dialog",attrs:{title:"下架确认",visible:t.dialogVisible2,width:"25%","lock-scroll":!1,top:"30vh",center:""},on:{"update:visible":function(e){t.dialogVisible2=e}}},[o("div",{staticClass:"tips"},[t._v(" 下架后用户将不能购买本商品，是否确认下架本商品？ ")]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"btn",on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取消")]),o("div",{staticClass:"btn",on:{click:function(e){return t.changeStatus()}}},[t._v("确认")])])]),o("el-dialog",{staticClass:"dialog",attrs:{title:"确认删除",visible:t.dialogVisible3,width:"25%","lock-scroll":!1,top:"30vh",center:""},on:{"update:visible":function(e){t.dialogVisible3=e}}},[o("div",{staticClass:"tips"},[t._v(" 删除后将无法恢复，是否确认删除本商品？ ")]),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"btn",on:{click:function(e){t.dialogVisible3=!1}}},[t._v("取消")]),o("div",{staticClass:"btn",on:{click:function(e){return t.deleteGood()}}},[t._v("确认")])])])],1)},s=[],i=(o("b0c0"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),{name:"Commodity",data:function(){return{dialogVisible1:!1,dialogVisible2:!1,dialogVisible3:!1,tableShow:!0,tableData:[],goodForm:{productName:"",describe:"",productPrice:"",picture:"",status:0},image:"",goodsName:"",deleteName:"",url:""}},methods:{getGood:function(){var t=this;this.$axios.get("/goods/goods").then((function(e){if(200===e.status){t.tableData=e.data;for(var o=0;o<t.tableData.length;o++)t.tableData[o].imageUrl="http://acfly.cn:8888/static/images/"+t.tableData[o].imageUrl,t.tableData[o].productPrice=t.tableData[o].productPrice/100}else t.$message.error(e.msg)})).catch((function(t){console.log(t)}))},beforeUpload:function(t){this.$message.success("添加成功！"),this.image=t.name,this.goodForm.picture=t;var e=new Image;return e.src=window.URL.createObjectURL(t),this.url=e.src,!1},addGood:function(){var t=this,e=new FormData;e.append("productName",this.goodForm.productName),e.append("describe",this.goodForm.describe),e.append("productPrice",this.goodForm.productPrice),e.append("status",this.goodForm.status),e.append("file",this.goodForm.picture),this.$axios.put("/goods/goods",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){200===e.status?(t.tableShow=!0,t.getGood(),t.clearData(),t.successMsg()):t.$message.error(e.msg)})).catch((function(t){console.log(t)}))},judgeDelete:function(t){this.dialogVisible3=!0,this.deleteName=t.productName},deleteGood:function(){var t=this;this.$axios.delete("/goods/goods?goodsName="+this.deleteName).then((function(e){200===e.status?(t.dialogVisible3=!1,t.getGood(),t.$message.success(e.data)):t.$message.error(e.msg)})).catch((function(t){console.log(t)}))},judgeStatus:function(t){"1"===t.status?this.dialogVisible2=!0:this.dialogVisible1=!0,this.goodsName=t.productName},changeStatus:function(){var t=this;this.$axios.post("/goods/goods?goodsName="+this.goodsName).then((function(e){200===e.status?(t.dialogVisible1?t.dialogVisible1=!t.dialogVisible1:t.dialogVisible2&&(t.dialogVisible2=!t.dialogVisible2),t.getGood(),t.$message.success(e.data)):t.$message.error(e.msg)})).catch((function(t){console.log(t)}))},successMsg:function(){this.$message.success("操作成功！")},clearData:function(){this.goodForm.productName="",this.goodForm.describe="",this.goodForm.productPrice="",this.goodForm.picture="",this.goodForm.status=0}},beforeMount:function(){this.getGood()},beforeRouteLeave:function(t,e,o){this.clearData(),this.tableShow=!0,o()}}),l=i,c=(o("6856"),o("2877")),r=Object(c["a"])(l,a,s,!1,null,"03a97bbf",null);e["default"]=r.exports},b0c0:function(t,e,o){var a=o("83ab"),s=o("9bf2").f,i=Function.prototype,l=i.toString,c=/^\s*function ([^ (]*)/,r="name";a&&!(r in i)&&s(i,r,{configurable:!0,get:function(){try{return l.call(this).match(c)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-04a32104.29ea0322.js.map