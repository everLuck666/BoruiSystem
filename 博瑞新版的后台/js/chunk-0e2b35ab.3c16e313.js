(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e2b35ab"],{7915:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"order"}},[t.listShow?a("div",{staticClass:"list"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title"},[t._v("订单管理")]),a("div",{staticClass:"right"},[a("el-select",{staticClass:"select",attrs:{placeholder:"未发货"},model:{value:t.orderData.deliver,callback:function(e){t.$set(t.orderData,"deliver",e)},expression:"orderData.deliver"}},[a("el-option",{attrs:{label:"未发货",value:"0"}}),a("el-option",{attrs:{label:"已发货",value:"1"}})],1),a("el-input",{staticClass:"input",attrs:{placeholder:"请输入订单号"},model:{value:t.orderData.number,callback:function(e){t.$set(t.orderData,"number",e)},expression:"orderData.number"}}),a("div",{staticClass:"btn",on:{click:function(e){return t.getOrder()}}},[t._v("筛选")]),a("div",{staticClass:"btn",on:{click:function(e){return t.exportOrder()}}},[t._v("导出")])],1)]),a("div",{staticClass:"line"}),a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"800"}},[a("el-table-column",{attrs:{prop:"orderId",label:"订单号",align:"center",width:"80"}}),a("el-table-column",{attrs:{prop:"productName",label:"商品名称",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"productNumber",label:"商品数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.productNumber+"件")+" ")]}}],null,!1,859937032)}),a("el-table-column",{attrs:{prop:"userName",label:"买家姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"phone",label:"联系方式",align:"center",width:"110"}}),a("el-table-column",{attrs:{prop:"address",label:"收货地址",align:"center"}}),a("el-table-column",{attrs:{prop:"orderAmout",label:"订单总额",align:"center"}}),a("el-table-column",{attrs:{prop:"orderTime",label:"下单时间",align:"center"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注信息",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.remark?e.row.remark:"无")+" ")]}}],null,!1,2346349912)}),a("el-table-column",{attrs:{label:"发票",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"!==e.row.invoicesType,expression:"scope.row.invoicesType!=='2'"}],staticStyle:{color:"blue"},attrs:{type:"text"},on:{click:function(a){return t.clickToInvoice(e.row)}}},[t._v(t._s("3"===e.row.invoicesType?"普通发票":"专用发票"))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"===e.row.invoicesType,expression:"scope.row.invoicesType==='2'"}],staticStyle:{color:"gray"},attrs:{type:"text"}},[t._v("无")])]}}],null,!1,1697307325)}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("1"===e.row.status?"已发货":"未发货")+" ")]}}],null,!1,2042233944)}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===e.row.status,expression:"scope.row.status === '1'"}],staticStyle:{color:"gray"},attrs:{type:"text"}},[t._v("发货")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"0"===e.row.status,expression:"scope.row.status === '0'"}],staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(a){return t.openMsg(e.row)}}},[t._v("发货")])]}}],null,!1,2125927498)})],1),a("div",{staticClass:"paging"},[a("div",{staticClass:"btn",on:{click:function(e){return t.getOrderPage(1)}}},[t._v("首页")]),a("div",{staticClass:"btn",on:{click:function(e){return t.getOrderPage(t.paging.prePage)}}},[t._v("上一页")]),a("div",{staticClass:"btn",on:{click:function(e){return t.getOrderPage(t.paging.nextPage)}}},[t._v("下一页")]),a("div",{staticClass:"word"},[t._v("第"+t._s(t.paging.page)+"页")]),a("div",{staticClass:"word"},[t._v("共"+t._s(t.paging.pageNum)+"页")])])],1):a("div",{staticClass:"info"},[a("el-page-header",{attrs:{content:"发票信息"},on:{back:t.goBack}}),a("table",{staticClass:"infoTable"},[a("tr",[a("th",{staticClass:"titleCol left"},[t._v("订单号")]),a("th",[t._v(t._s(t.invoicesData.orderId))]),a("th",{staticClass:"titleCol"},[t._v("商品名称数量")]),a("th",{staticClass:"right"},[t._v(t._s(t.invoicesData.productName+" * "+t.invoicesData.productNumber))])]),a("tr",[a("th",{staticClass:"titleCol left"},[t._v("买家姓名")]),a("th",[t._v(t._s(t.invoicesData.userName))]),a("th",{staticClass:"titleCol"},[t._v("联系方式")]),a("th",{staticClass:"right"},[t._v(t._s(t.invoicesData.phone))])]),a("tr",[a("th",{staticClass:"titleCol left"},[t._v("收货地址")]),a("th",[t._v(t._s(t.invoicesData.address))]),a("th",{staticClass:"titleCol"},[t._v("订单总额")]),a("th",{staticClass:"right"},[t._v(t._s(t.invoicesData.orderAmout))])]),a("tr",[a("th",{staticClass:"titleCol left"},[t._v("邮箱")]),a("th",[t._v(t._s(t.invoicesData.email))]),a("th",{staticClass:"titleCol"},[t._v("下单时间")]),a("th",{staticClass:"right"},[t._v(t._s(t.invoicesData.orderTime))])]),a("tr",[a("th",{staticClass:"titleCol left"},[t._v("发票类型")]),a("th",[t._v(t._s(t.type))]),a("th"),a("th",{staticClass:"right"})]),a("tr",[a("th",{staticClass:"titleCol left"},[t._v("发票抬头")]),a("th",[t._v(t._s(t.invoicesOtherData.invoiceTitle))]),a("th",{staticClass:"titleCol"},[t._v("开户银行")]),a("th",{staticClass:"right"},[t._v(t._s(t.invoicesOtherData.bank))])]),a("tr",[a("th",{staticClass:"titleCol left"},[t._v("开户银行账号")]),a("th",[t._v(t._s(t.invoicesOtherData.accout))]),a("th",{staticClass:"titleCol"},[t._v("税号")]),a("th",{staticClass:"right"},[t._v(t._s(t.invoicesOtherData.taxId))])])])],1),a("el-dialog",{staticClass:"dialog",attrs:{title:"发货短信提示",visible:t.dialogVisible,width:"30%","lock-scroll":!1,top:"30vh",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"info"},[t._v("姓名： "+t._s(t.rowData.userName))]),a("div",{staticClass:"info"},[t._v("联系方式： "+t._s(t.rowData.phone))]),a("div",{staticClass:"info"},[t._v("商品： "+t._s(t.rowData.productName))]),a("div",{staticClass:"input info"},[a("el-input",{staticClass:"size_left",attrs:{placeholder:"请输入快递单号"},model:{value:t.express.id,callback:function(e){t.$set(t.express,"id",e)},expression:"express.id"}}),a("el-input",{staticClass:"size_right left",attrs:{placeholder:"快递名称"},model:{value:t.express.name,callback:function(e){t.$set(t.express,"name",e)},expression:"express.name"}})],1),a("div",{staticClass:"info tips"},[t._v("请确保信息正确无误。")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"btn",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),a("div",{staticClass:"btn",on:{click:function(e){return t.sendSms()}}},[t._v("确认")])])])],1)},i=[],r=(a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"Order",data:function(){return{listShow:!0,orderData:{deliver:"",number:""},tableData:[],exportData:[],paging:{page:1,pageSize:5,pageNum:"",hasNextPage:"",hasPreviousPage:"",isFirstPage:"",isLastPage:"",nextPage:"",prePage:""},dialogVisible:!1,rowData:{},express:{id:"",name:""},invoicesData:{},invoicesOtherData:{},type:"",token:""}},methods:{openMsg:function(t){this.rowData=t,this.dialogVisible=!0},clickToInvoice:function(t){var e=this;this.invoicesData=t,"3"===t.invoicesType?this.type="普通发票":this.type="专用发票",this.$axios.get("/orders/invoices",{params:{orderId:t.orderId}}).then((function(t){200===t.status?(e.invoicesOtherData=t.data,e.listShow=!1):e.$message.error(t.msg)})).catch((function(t){console.log(t)}))},goBack:function(){this.listShow=!0},getOrder:function(){var t=this;this.$axios.get("/orders/orders",{params:{orderId:this.orderData.number,page:this.paging.page,pageSize:this.paging.pageSize,status:this.orderData.deliver}}).then((function(e){var a=e.data;if(200===e.status){t.tableData=a.list,t.paging.page=a.pageNum,t.paging.pageNum=a.pages,t.paging.hasPreviousPage=a.hasPreviousPage,t.paging.hasNextPage=a.hasNextPage,t.paging.isFirstPage=a.isFirstPage,t.paging.isLastPage=a.isLastPage,t.paging.prePage=a.prePage,t.paging.nextPage=a.nextPage;for(var s=0;s<a.list.length;s++)t.tableData[s].orderAmout=t.tableData[s].orderAmout/100}else t.$message.error(e.msg)})).catch((function(t){console.log(t)}))},getOrderPage:function(t){var e=this;0===t&&this.paging.isFirstPage?this.$message.warning("这是已经是首页了"):0===t&&this.paging.isLastPage?this.$message.warning("这是已经是尾页了"):(this.paging.hasPreviousPage||this.paging.hasNextPage||1===t)&&this.$axios.get("/orders/orders",{params:{orderId:this.orderData.number,page:t,pageSize:this.paging.pageSize,status:this.orderData.deliver}}).then((function(a){var s=a.data;200===a.status?(e.tableData=s.list,e.paging.page=t,e.paging.page=s.pageNum,e.paging.pageNum=s.pages,e.paging.hasPreviousPage=s.hasPreviousPage,e.paging.hasNextPage=s.hasNextPage,e.paging.isFirstPage=s.isFirstPage,e.paging.isLastPage=s.isLastPage,e.paging.prePage=s.prePage,e.paging.nextPage=s.nextPage):e.$message.error(a.msg)})).catch((function(t){console.log(t)}))},exportOrder:function(){var t="http://acfly.cn:8888/orders/exportOrders",e=new XMLHttpRequest;e.open("get",t,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.setRequestHeader("token",this.token),e.send(),e.responseType="blob",e.onload=function(){if(200===this.status){var t=this.response,e=window.URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.download="订单记录表",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)}else alert("出现了未知的错误!")}},sendSms:function(){var t=this;this.$axios.post("/sms/sms2",{deliveryId:this.express.id,deliveryName:this.express.name,phone:this.rowData.phone,productName:this.rowData.productName}).then((function(e){200===e.status?(t.dialogVisible=!1,t.clearOrderData(),t.checkStatus(t.rowData.orderId,t.rowData.productName),t.$message.success(e.data)):t.$message.error(e.msg)})).catch((function(t){console.log(t)}))},checkStatus:function(t,e){var a=this;this.$axios.post("/orders/updateOrder",{orderId:t,productName:e}).then((function(t){console.log(t),200===t.status?a.getOrder():a.$message.error(t.msg)})).catch((function(t){console.log(t)}))},clearOrderData:function(){this.orderData.deliver="",this.orderData.number=""}},creater:function(){this.token=localStorage.getItem("token")},mounted:function(){this.clearOrderData(),this.listShow=!0,this.getOrder()},beforeRouteEnter:function(t,e,a){a((function(t){t.getOrder()}))},beforeRouteLeave:function(t,e,a){this.clearOrderData(),this.listShow=!0,a()}}),o=r,n=(a("da4e"),a("2877")),l=Object(n["a"])(o,s,i,!1,null,"b3eebeee",null);e["default"]=l.exports},b0c0:function(t,e,a){var s=a("83ab"),i=a("9bf2").f,r=Function.prototype,o=r.toString,n=/^\s*function ([^ (]*)/,l="name";s&&!(l in r)&&i(r,l,{configurable:!0,get:function(){try{return o.call(this).match(n)[1]}catch(t){return""}}})},c704:function(t,e,a){},da4e:function(t,e,a){"use strict";a("c704")}}]);
//# sourceMappingURL=chunk-0e2b35ab.3c16e313.js.map